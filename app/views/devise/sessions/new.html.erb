<div class="login-bg">
<div class="col-sm-6 col-sm-offset-3 col-xs-12">
  <div class="wrapper col-xs-12">
    <br><h2>Log in</h2>
    <%= form_for(resource, as: resource_name, url: session_path(resource_name), html: {class: "login2"}) do |f| %>
      <div class="field">
        <%= f.text_field :login, autofocus: true, class: "form-control", placeholder:"User name or email" %>
        <i class="fa fa-user"></i>
      </div>

      <div class="field">
        <%= f.password_field :password, autocomplete: "off", class: "form-control", placeholder:"Password" %>
        <i class="fa fa-key"></i>
      </div>

      <% if devise_mapping.rememberable? -%>
          <div class="field">
            <%= f.check_box :remember_me %>
            <%= f.label :remember_me %>
          </div>
      <% end %>

      <div class="actions text-center">
        <%= f.submit "Log in", class:"btn btn-info" %>
      </div>
    <% end %>

    <%= render "devise/shared/links" %>
  </div>
</div>
</div>
<script>
  var working = false;
  $('.login').on('submit', function(e) {
    e.preventDefault();
    if (working) return;
    working = true;
    var $this = $(this),
        $state = $this.find('button > .state');
    $this.addClass('loading');
    $state.html('Authenticating');
    setTimeout(function() {
      $this.addClass('ok');
      $state.html('Welcome back!');
      setTimeout(function() {
        $state.html('Log in');
        $this.removeClass('ok loading');
        working = false;
      }, 4000);
    }, 3000);
  });
</script>
